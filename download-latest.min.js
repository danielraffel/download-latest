!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports?module.exports=t():e.DownloadLatest=t()}("undefined"!=typeof self?self:this,function(){"use strict";function e(){var e=null,t=null,r="undefined"!=typeof navigator&&navigator.userAgentData;if(r&&r.platform){var a=r.platform.toLowerCase();if("macos"===a||"mac os x"===a?e="macos":"windows"===a?e="windows":"linux"!==a&&"chromeos"!==a||(e="linux"),r.architecture){var n=r.architecture.toLowerCase();t="arm"===n||"arm64"===n?"arm64":"x64"}}if("undefined"!=typeof navigator){var s=(navigator.userAgent||"").toLowerCase(),o=(navigator.platform||"").toLowerCase();e||(-1!==s.indexOf("mac")?e="macos":-1!==s.indexOf("win")?e="windows":-1===s.indexOf("linux")&&-1===s.indexOf("cros")||(e="linux")),t||(t=-1!==s.indexOf("arm")||-1!==s.indexOf("aarch64")||-1!==o.indexOf("arm")||"macos"===e?"arm64":"x64")}return{os:e,arch:t}}var t={"macos-arm64":[/[-_.]aarch64[^/]*\.dmg$/i,/[-_.]arm64[^/]*\.dmg$/i,/\.dmg$/i],"macos-x64":[/[-_.]x86[_-]64[^/]*\.dmg$/i,/[-_.]x64[^/]*\.dmg$/i,/[-_.]intel[^/]*\.dmg$/i,/\.dmg$/i],"windows-x64":[/[-_.]x86[_-]64[^/]*\.exe$/i,/[-_.]x64[^/]*\.exe$/i,/\.exe$/i,/\.msi$/i],"windows-arm64":[/[-_.]arm64[^/]*\.exe$/i,/[-_.]x86[_-]64[^/]*\.exe$/i,/\.exe$/i],"linux-x64":[/[-_.]x86[_-]64[^/]*\.AppImage$/i,/[-_.]amd64[^/]*\.deb$/i,/[-_.]x86[_-]64[^/]*\.deb$/i,/[-_.]amd64[^/]*\.AppImage$/i],"linux-arm64":[/[-_.]aarch64[^/]*\.AppImage$/i,/[-_.]arm64[^/]*\.deb$/i,/[-_.]aarch64[^/]*\.deb$/i,/[-_.]aarch64[^/]*\.rpm$/i]},r=/\.(sha256|sha512|sig|asc|blockmap|zsync)$/i;function a(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];n.name&&n.browser_download_url&&!r.test(n.name)&&t.push({name:n.name,url:n.browser_download_url,size:n.size||0})}return t}function n(e,r,a,n){var s,o=r+"-"+a;s=n&&n[o]?Array.isArray(n[o])?n[o]:[n[o]]:t[o]||[];for(var i=0;i<s.length;i++)for(var l=0;l<e.length;l++)if(s[i].test(e[l].name))return e[l];return null}function s(e){"string"==typeof e&&(e={repo:e}),this.repo=e.repo,this.version=e.version||null,this.match=e.match||null,this.text=e.text||"Download for {os}",this._releasesUrl="https://github.com/"+this.repo+"/releases"+(this.version?"/tag/"+this.version:"/latest"),this._promise=null}s.prototype.get=function(){if(this._promise)return this._promise;var t=this,r=e();return this._promise=function(e,t){var r="dl-latest:"+e+":"+(t||"latest");try{var n=sessionStorage.getItem(r);if(n){var s=JSON.parse(n);if(Date.now()-s.ts<3e5)return Promise.resolve(s.data)}}catch(e){}return fetch(t?"https://api.github.com/repos/"+e+"/releases/tags/"+t:"https://api.github.com/repos/"+e+"/releases/latest",{headers:{Accept:"application/vnd.github+json"}}).then(function(e){if(!e.ok)throw new Error("GitHub API "+e.status);return e.json()}).then(function(e){var t={version:e.tag_name,releasesUrl:e.html_url,assets:a(e.assets||[])};try{sessionStorage.setItem(r,JSON.stringify({data:t,ts:Date.now()}))}catch(e){}return t})}(this.repo,this.version).then(function(e){var a=r.os&&r.arch?n(e.assets,r.os,r.arch,t.match):null;return{url:a?a.url:e.releasesUrl,asset:a?a.name:null,os:r.os,arch:r.arch,version:e.version,releasesUrl:e.releasesUrl,allAssets:e.assets,matched:!!a}}).catch(function(){return{url:t._releasesUrl,asset:null,os:r.os,arch:r.arch,version:null,releasesUrl:t._releasesUrl,allAssets:[],matched:!1}}),this._promise},s.prototype.attach=function(e){var t="string"==typeof e?document.querySelector(e):e;if(t){var r=this;this.get().then(function(e){"A"===t.tagName?t.href=e.url:(t.style.cursor="pointer",t.onclick=function(){window.location.href=e.url});var a={macos:"macOS",windows:"Windows",linux:"Linux"}[e.os]||"your platform";t.textContent=r.text.replace("{os}",a).replace("{arch}",e.arch||"").replace("{version}",e.version||""),t.setAttribute("data-dl-os",e.os||""),t.setAttribute("data-dl-arch",e.arch||""),t.title=e.asset||"View releases",t.addEventListener("contextmenu",function(t){e.releasesUrl&&(t.preventDefault(),window.open(e.releasesUrl,"_blank"))})})}},s.prototype.attachFallback=function(e){var t="string"==typeof e?document.querySelector(e):e;t&&this.get().then(function(e){t.innerHTML="";var r=e.allAssets;if(!r.length){var a=document.createElement("a");return a.href=e.releasesUrl,a.textContent="View releases on GitHub",a.target="_blank",void t.appendChild(a)}for(var n=0;n<r.length;n++){var s=document.createElement("a");if(s.href=r[n].url,s.textContent=r[n].name,r[n].size){var o=(r[n].size/1048576).toFixed(1);s.textContent+=" ("+o+" MB)"}s.style.display="block",s.style.margin="4px 0",t.appendChild(s)}})};var o="undefined"!=typeof document?document.currentScript:null;function i(){if(o&&o.dataset&&o.dataset.repo){var e=o.dataset,t=new s({repo:e.repo,version:e.version||null,text:e.text||"Download for {os}"});if("auto"in e)t.get().then(function(e){e.matched&&setTimeout(function(){window.location.replace(e.url)},1500)});else{if(e.target)t.attach(e.target);else{var r=document.createElement("a");r.className="dl-latest-btn",r.textContent="Download",r.style.cssText="display:inline-block;padding:12px 24px;background:#fff;color:#000;border-radius:8px;text-decoration:none;font:600 16px/1 system-ui,sans-serif;cursor:pointer;",o.parentNode.insertBefore(r,o.nextSibling),t.attach(r)}e.fallback&&t.attachFallback(e.fallback)}}}return"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()),s.detectPlatform=e,s.matchAsset=n,s.filterAssets=a,s.DEFAULT_MATCH=t,s});