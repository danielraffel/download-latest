!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports?module.exports=t():e.DownloadLatest=t()}("undefined"!=typeof self?self:this,function(){"use strict";function e(){var e=null,t=null,a="undefined"!=typeof navigator&&navigator.userAgentData;if(a&&a.platform){var r=a.platform.toLowerCase();if("macos"===r||"mac os x"===r?e="macos":"windows"===r?e="windows":"linux"!==r&&"chromeos"!==r||(e="linux"),a.architecture){var n=a.architecture.toLowerCase();t="arm"===n||"arm64"===n?"arm64":"x64"}}if("undefined"!=typeof navigator){var o=(navigator.userAgent||"").toLowerCase(),s=(navigator.platform||"").toLowerCase();e||(-1!==o.indexOf("mac")?e="macos":-1!==o.indexOf("win")?e="windows":-1===o.indexOf("linux")&&-1===o.indexOf("cros")||(e="linux")),t||(t=-1!==o.indexOf("arm")||-1!==o.indexOf("aarch64")||-1!==s.indexOf("arm")||"macos"===e?"arm64":"x64")}return{os:e,arch:t}}var t={"macos-arm64":[/[-_.]aarch64[^/]*\.dmg$/i,/[-_.]arm64[^/]*\.dmg$/i,/\.dmg$/i],"macos-x64":[/[-_.]x86[_-]64[^/]*\.dmg$/i,/[-_.]x64[^/]*\.dmg$/i,/[-_.]intel[^/]*\.dmg$/i,/\.dmg$/i],"windows-x64":[/[-_.]x86[_-]64[^/]*\.exe$/i,/[-_.]x64[^/]*\.exe$/i,/\.exe$/i,/\.msi$/i],"windows-arm64":[/[-_.]arm64[^/]*\.exe$/i,/[-_.]x86[_-]64[^/]*\.exe$/i,/\.exe$/i],"linux-x64":[/[-_.]x86[_-]64[^/]*\.AppImage$/i,/[-_.]amd64[^/]*\.deb$/i,/[-_.]x86[_-]64[^/]*\.deb$/i,/[-_.]amd64[^/]*\.AppImage$/i],"linux-arm64":[/[-_.]aarch64[^/]*\.AppImage$/i,/[-_.]arm64[^/]*\.deb$/i,/[-_.]aarch64[^/]*\.deb$/i,/[-_.]aarch64[^/]*\.rpm$/i]},a=/\.(sha256|sha512|sig|asc|blockmap|zsync)$/i;function r(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n.name&&n.browser_download_url&&!a.test(n.name)&&t.push({name:n.name,url:n.browser_download_url,size:n.size||0})}return t}function n(e,a,r,n){var o,s=a+"-"+r;o=n&&n[s]?Array.isArray(n[s])?n[s]:[n[s]]:t[s]||[];for(var i=0;i<o.length;i++)for(var l=0;l<e.length;l++)if(o[i].test(e[l].name))return e[l];return null}function o(e){"string"==typeof e&&(e={repo:e}),this.repo=e.repo,this.version=e.version||null,this.match=e.match||null,this.text=e.text||"Download for {os}",this.noMatchText=e.noMatchText||"View all downloads",this.noMatchUrl=e.noMatchUrl||null,this.contextMenu=!!e.contextMenu,this._releasesUrl="https://github.com/"+this.repo+"/releases"+(this.version?"/tag/"+this.version:"/latest"),this._promise=null}o.prototype.get=function(){if(this._promise)return this._promise;var t=this,a=e();return this._promise=function(e,t){var a="dl-latest:"+e+":"+(t||"latest");try{var n=sessionStorage.getItem(a);if(n){var o=JSON.parse(n);if(Date.now()-o.ts<3e5)return Promise.resolve(o.data)}}catch(e){}return fetch(t?"https://api.github.com/repos/"+e+"/releases/tags/"+t:"https://api.github.com/repos/"+e+"/releases/latest",{headers:{Accept:"application/vnd.github+json"}}).then(function(e){if(!e.ok)throw new Error("GitHub API "+e.status);return e.json()}).then(function(e){var t={version:e.tag_name,releasesUrl:e.html_url,assets:r(e.assets||[])};try{sessionStorage.setItem(a,JSON.stringify({data:t,ts:Date.now()}))}catch(e){}return t})}(this.repo,this.version).then(function(e){var r=a.os&&a.arch?n(e.assets,a.os,a.arch,t.match):null;return{url:r?r.url:e.releasesUrl,asset:r?r.name:null,os:a.os,arch:a.arch,version:e.version,releasesUrl:e.releasesUrl,allAssets:e.assets,matched:!!r}}).catch(function(){return{url:t._releasesUrl,asset:null,os:a.os,arch:a.arch,version:null,releasesUrl:t._releasesUrl,allAssets:[],matched:!1}}),this._promise},o.prototype.attach=function(e){var t="string"==typeof e?document.querySelector(e):e;if(t){var a=this;this.get().then(function(e){var r=e.matched?e.url:a.noMatchUrl||e.releasesUrl;"A"===t.tagName?t.href=r:(t.style.cursor="pointer",t.onclick=function(){window.location.href=r});var n={macos:"macOS",windows:"Windows",linux:"Linux"}[e.os]||"your platform";e.matched?(t.textContent=a.text.replace("{os}",n).replace("{arch}",e.arch||"").replace("{version}",e.version||""),t.title=e.asset||""):(t.textContent=a.noMatchText.replace("{os}",n).replace("{arch}",e.arch||"").replace("{version}",e.version||""),t.title="No download available for your platform"),t.setAttribute("data-dl-os",e.os||""),t.setAttribute("data-dl-arch",e.arch||""),t.setAttribute("data-dl-matched",e.matched?"true":"false"),a.contextMenu&&t.addEventListener("contextmenu",function(t){e.releasesUrl&&(t.preventDefault(),window.open(e.releasesUrl,"_blank"))})})}},o.prototype.attachFallback=function(e){var t="string"==typeof e?document.querySelector(e):e;t&&this.get().then(function(e){t.innerHTML="";var a=e.allAssets;if(!a.length){var r=document.createElement("a");return r.href=e.releasesUrl,r.textContent="View releases on GitHub",r.target="_blank",void t.appendChild(r)}for(var n=0;n<a.length;n++){var o=document.createElement("a");if(o.href=a[n].url,o.textContent=a[n].name,a[n].size){var s=(a[n].size/1048576).toFixed(1);o.textContent+=" ("+s+" MB)"}o.style.display="block",o.style.margin="4px 0",t.appendChild(o)}})};var s={"macos-arm64":"macOS (Apple Silicon)","macos-x64":"macOS (Intel)","windows-x64":"Windows (64-bit)","windows-arm64":"Windows (ARM)","linux-x64":"Linux (x86_64)","linux-arm64":"Linux (ARM64)"};function i(e){var t=e.name.toLowerCase(),a=[];return/\.dmg$|\.pkg$|macos|darwin/i.test(t)&&(/aarch64|arm64/i.test(t)?a.push("macos-arm64"):(/x86[_-]?64|amd64|intel/i.test(t)||a.push("macos-arm64"),a.push("macos-x64"))),/\.exe$|\.msi$|windows|win32|win64/i.test(t)&&(/arm64/i.test(t)?a.push("windows-arm64"):a.push("windows-x64")),/\.deb$|\.rpm$|\.appimage$|\.flatpak$|\.snap$|linux/i.test(t)&&(/aarch64|arm64/i.test(t)?a.push("linux-arm64"):(/x86[_-]?64|amd64/i.test(t),a.push("linux-x64"))),a}function l(e){var t=e.name.match(/\.[^.]+$/);t=t?t[0]:"";var a=e.size?" ("+(e.size/1048576).toFixed(1)+" MB)":"";return e.name+a}o.prototype.attachSelector=function(e,t){var a="string"==typeof e?document.querySelector(e):e;if(a){var r=(t=t||{}).include||null,n=t.exclude||[];this.get().then(function(e){var o=e.allAssets;if(o.length){for(var c={},d=["macos-arm64","macos-x64","windows-x64","windows-arm64","linux-x64","linux-arm64"],u=0;u<o.length;u++)for(var m=i(o[u]),h=0;h<m.length;h++){var p=m[h];-1===n.indexOf(p)&&(r&&-1===r.indexOf(p)||(c[p]||(c[p]=[]),c[p].push(o[u])))}var f=document.createElement("select");f.className="dl-latest-selector",f.style.cssText=t.style||"";for(var x=e.os&&e.arch?e.os+"-"+e.arch:null,v=null,g=0;g<d.length;g++){var w=d[g];if(c[w]){var b=document.createElement("optgroup");b.label=s[w]||w;for(var _=0;_<c[w].length;_++){var y=c[w][_],$=document.createElement("option");$.value=y.url,$.textContent=l(y),w!==x||v||($.selected=!0,v=y.url),b.appendChild($)}f.appendChild(b)}}var C={};for(var A in c)for(var M=0;M<c[A].length;M++)C[c[A][M].name]=!0;for(var U=[],S=0;S<o.length;S++)C[o[S].name]||U.push(o[S]);if(U.length){var k=document.createElement("optgroup");k.label="Other";for(var E=0;E<U.length;E++){var L=document.createElement("option");L.value=U[E].url,L.textContent=l(U[E]),k.appendChild(L)}f.appendChild(k)}var O=document.createElement("a");O.className="dl-latest-btn",O.href=f.value||e.releasesUrl,O.textContent=t.buttonText||"Download",t.buttonStyle&&(O.style.cssText=t.buttonStyle),f.addEventListener("change",function(){O.href=this.value}),a.innerHTML="",a.appendChild(f),a.appendChild(O)}})}};var c=!1;var d="undefined"!=typeof document?document.currentScript:null;function u(){if(d&&d.dataset&&d.dataset.repo){var e=d.dataset,t=new o({repo:e.repo,version:e.version||null,text:e.text||"Download for {os}",noMatchText:e.noMatchText||void 0,noMatchUrl:e.noMatchUrl||void 0,contextMenu:"contextMenu"in e});if("auto"in e)t.get().then(function(e){e.matched&&setTimeout(function(){window.location.replace(e.url)},1500)});else{if(e.target)t.attach(e.target);else{!function(e){if(!c){c=!0;var t="--dl-bg:#fff;--dl-color:#000;--dl-radius:8px;",a="--dl-bg:#24292f;--dl-color:#fff;--dl-radius:8px;",r=".dl-latest-btn{display:inline-block;padding:12px 24px;background:var(--dl-bg);color:var(--dl-color);border-radius:var(--dl-radius);text-decoration:none;font:600 16px/1 system-ui,sans-serif;cursor:pointer;border:none;transition:opacity .15s}.dl-latest-btn:hover{opacity:.85;text-decoration:none}";r="auto"===e?":root{"+t+"}@media(prefers-color-scheme:dark){:root{"+a+"}}"+r:"dark"===e?":root{"+a+"}"+r:":root{"+t+"}"+r;var n=document.createElement("style");n.textContent=r,(document.head||document.documentElement).appendChild(n)}}(e.theme||"");var a=document.createElement("a");a.className="dl-latest-btn",a.textContent="Download",d.parentNode.insertBefore(a,d.nextSibling),t.attach(a)}e.fallback&&t.attachFallback(e.fallback),e.selector&&t.attachSelector(e.selector)}}}return"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",u):u()),o.detectPlatform=e,o.matchAsset=n,o.filterAssets=r,o.DEFAULT_MATCH=t,o});